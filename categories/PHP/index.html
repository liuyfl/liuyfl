<!DOCTYPE html>
<html>
	<!-- Head tag -->
	<head>
	<meta chartset="utf-8">
	<meta http=equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">
	<link rel="icon" href="favicon/favicon.ico">
	<title>liuyf's blog</title>

	<!-- Bootstrap core css -->
	<link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css" type="text/css" async>
	<!-- Blog css -->
	<link rel="stylesheet" href="/css/blog.css" type="text/css" async>
</head>

	<body>
		<!-- Menu -->
		<!-- Navigation -->
<link rel="stylesheet" href="/css/font-awesome.css">
<div class="blog-nav">
	<div class="blog-nav-inner">
		<div class="container">
			<div class="blog-navbar">
				<a href="/" class="logo"><img src="/images/logo.png"></a>
				<nav class="navbar-nav">
					
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/tags">标签</a></li>
					
					<li><a href="javascript:void(0)" class="popup-trigger"><i class="fa fa-search"></i></a></li>
				</nav>
			</div>
		</div>
	</div>
	<div class="blog-nav-bg" style="background-image:url('/images/bg3.jpg');"></div>
</div>

		
		<div class="archive-main">
	<div class="container">
		





	
	
	<div class="archives-wrap" style="border-image:url(/images/prints.png) 30 30 round;">
	
		
		<div class="archives-year-wrap">
			
				<span class="year-accordion year-show" data-toggle="collapse" data-target="#archive-2015_9">October , 2015</span>
			
			<!--<a href="/archives/2015" class="archive-year">October , 2015</a>-->
		</div>
		
			<div class="archives collapse in" id="archive-2015_9">
		
	
	
	

 <article class="archive-article">
	<div class="archive-article-inner">
		<header class="archive-article-header">
			
				<a href="/2015/10/22/php-set-cookie/">php下设置cookie问题</a>
			
			<span>&nbsp;-&nbsp;Oct 22,2015</span>
		</header>
	</div>
</article>




	
		
			</div>
		
		<div class="archives-year-wrap">
			
				<span class="year-accordion" data-toggle="collapse" data-target="#archive-2015_5">June , 2015</span>
			
			<!--<a href="/archives/2015" class="archive-year">June , 2015</a>-->
		</div>
		
			<div class="archives collapse" id="archive-2015_5">
		
	
	

 <article class="archive-article">
	<div class="archive-article-inner">
		<header class="archive-article-header">
			
				<a href="/2015/06/24/ci-more-database/">CI连接多个数据库</a>
			
			<span>&nbsp;-&nbsp;Jun 24,2015</span>
		</header>
	</div>
</article>


	</div></div>

	</div>
</div>


		<!-- Footer -->
		<footer class="blog-footer">
	<p>The template theme built for bootstrap</p>
	<p> Adapted for Hexo by liuyf</p>
</footer>
<div class="bg-flower" style="background-image:url('/images/flower.png');"></div>
<!--
style="background-image:url('/images/flower.png');"
-->

		<!-- After footer scripts -->
		<script src="/js/jquery.min.js"></script>
<script src="/bootstrap/js/bootstrap.min.js"></script>
<script src="/js/script.js"></script>

<div class="popup" class="modal fade" data-backdrop="static">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button class="popup-btn-close" data-dismiss="modal">&times;</button>
				<span class="search-icon fa fa-search"></span>
				<input type="text" id="local-search-input">
			</div>
			<div class="modal-body">
				<div id="local-search-result"></div>
			</div>
		</div>
	</div>
</div>

	<script type="text/javascript">
		var isfetched = false;
		var path="/search.xml";
		function adjusth(){
			var $clone=$('.popup').clone().css('display','block').appendTo('body');
			var $obj=$clone.find('#local-search-input');
			$('.popup .modal-body').height($clone.height()-$obj.innerHeight()-10+'px');
			$clone.remove();
		}
		function proceedsearch() {
			adjusth();
			$('.popup').modal('show');
		}
		var searchFunc=function(path,search_id,content_id){
			'use strict';
			$.ajax({
				url:path,
				dataType:'xml',
				async:true,
				success:function(xmlrespone){
					isfetched = true;
					$('.popup #local-search-result').empty().appendTo('.popup .modal-body');
					var datas=$('entry',xmlrespone).map(function(){
						return{
							title:$('title',this).text(),
							content:$('content',this).text(),
							url:$('url',this).text()
						};
					}).get();
					var $input = document.getElementById(search_id);
					var $resultcontent=document.getElementById(content_id);
					$input.addEventListener('input',function(){
						var matchcounts=0;
						var str='<ul class="search-result-list">';
						var keywords=this.value.trim().toLowerCase().split(/[\s\-]+/);
						$resultcontent.innerHTML='';
						if(this.value.trim().length>1){
							datas.forEach(function(data){
								var isMatch=false;
								var content_index=[];
								var data_title=data.title.trim().toLowerCase();
								var data_content=data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
								var data_url=decodeURIComponent(data.url);
								var index_title=-1;
								var index_content=-1;
								var first_occur=-1;
								if(data_title!=''){
									keywords.forEach(function(keyword,i){
										index_title=data_title.indexOf(keyword);
										index_content=data_content.indexOf(keyword);
										if(index_title>=0||index_content>=0)
										{
											isMatch=true;
											if(i==0){
												first_occur=index_content;
											}
										}
									})
								}
								if(isMatch){
									matchcounts+=1;
									str+='<li><a href="'+data_url+'" class="search-result-title">'+data_title+'</a>';
									var content=data.content.trim().replace(/<[^>]+>/g,'');
									if(first_occur>=0){
										var start=first_occur-20;
										var end=first_occur+80;
										if(start<0){
											start=0;
										}
										if(start==0){
											end=50;
										}
										if(end>content.length){
											end=content.length;
										}
										var match_content=content.substring(start,end);
										keywords.forEach(function(keyword){
											var regS=new RegExp(keyword,"gi");
											match_content=match_content.replace(regS,"<b class='search-keyword'>"+keyword+"</b>");
										});
										str+='<p class="search-result">'+match_content+'...</p>';
									}
									str+='</li>';
								}
							});
						}
						str+='</ul>';
						if(matchcounts==0){
							str='<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>';
						}
						if(keywords==''){
							str='<div id="no-result"><i class="fa fa-search fa-5x"></i></div>';
						}
						$resultcontent.innerHTML=str;
					})
					proceedsearch();
				}
			})
		}
		$('.popup-trigger').click(function(e){
			e.stopPropagation();
			if (isfetched == false) {
				searchFunc(path, 'local-search-input', 'local-search-result');
			} else {
				proceedsearch();
			};
		})
		$('.popup-btn-close').click(function(e){
			$('.popup').modal('hide');
		});
		$(window).resize(function(){
			adjusth();
		})
	</script>



	</body>
</html>